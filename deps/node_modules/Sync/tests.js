"use strict";

var Semaphore = require( './Sync.js' ).Semaphore;
function test ( condition, text ) {
	if ( condition ) {
		return;
	}

	throw new Error( text );
}


// locks
var released = false;
var lock = new Semaphore( 1, function () { released = true; } );
lock.lock();
lock.notify();
test( released === false );
lock.notify();
test( released === true );
try {
	lock.notify();
}
catch ( e ) {
	released = false;
}
test( released === false );





console.log( 'TESTS OK' );

